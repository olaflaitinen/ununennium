
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Production-grade Python library for satellite imagery ML">
      
      
      
        <link rel="canonical" href="https://ununennium.readthedocs.io/theory/metric_definitions/">
      
      
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Metric Definitions and Evaluation Theory in Geospatial AI: A Theoretical Treatise - Ununennium</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#metric-definitions-and-evaluation-theory-in-geospatial-ai-a-theoretical-treatise" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Ununennium" class="md-header__button md-logo" aria-label="Ununennium" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ununennium
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Metric Definitions and Evaluation Theory in Geospatial AI: A Theoretical Treatise
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/ununennium/ununennium" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    ununennium/ununennium
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../getting_started/" class="md-tabs__link">
        
  
  
    
  
  Getting Started

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../api/core/" class="md-tabs__link">
          
  
  
  API Reference

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/segmentation.md" class="md-tabs__link">
          
  
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../models/zoo.md" class="md-tabs__link">
        
  
  
    
  
  Model Zoo

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Ununennium" class="md-nav__button md-logo" aria-label="Ununennium" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Ununennium
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ununennium/ununennium" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    ununennium/ununennium
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    API Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    API Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/core/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Core
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/io/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    I/O
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/models.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Models
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../api/training/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Training
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Tutorials
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Tutorials
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/segmentation.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Segmentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/change_detection.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Change Detection
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../models/zoo.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Model Zoo
  

    
  </span>
  
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#abstract" class="md-nav__link">
    <span class="md-ellipsis">
      
        Abstract
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-confusion-matrix-primitives" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Confusion Matrix Primitives
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="1. Confusion Matrix Primitives">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#11-the-accuracy-paradox" class="md-nav__link">
    <span class="md-ellipsis">
      
        1.1 The Accuracy Paradox
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-set-theoretic-metrics-overlap" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Set-Theoretic Metrics (Overlap)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Set-Theoretic Metrics (Overlap)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#21-jaccard-index-iou-intersection-over-union" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.1 Jaccard Index (IoU - Intersection over Union)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#22-dice-coefficient-f1-score" class="md-nav__link">
    <span class="md-ellipsis">
      
        2.2 Dice Coefficient (F1 Score)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-geometric-and-boundary-metrics-topology" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Geometric and Boundary Metrics (Topology)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. Geometric and Boundary Metrics (Topology)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-hausdorff-distance" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.1 Hausdorff Distance
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-boundary-f1-bf1-score" class="md-nav__link">
    <span class="md-ellipsis">
      
        3.2 Boundary F1 (BF1) Score
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-detection-metrics-object-level" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Detection Metrics (Object Level)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Detection Metrics (Object Level)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-average-precision-ap" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.1 Average Precision (AP)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-mean-average-precision-map" class="md-nav__link">
    <span class="md-ellipsis">
      
        4.2 Mean Average Precision (mAP)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-calibration-metrics-probabilistic" class="md-nav__link">
    <span class="md-ellipsis">
      
        5. Calibration Metrics (Probabilistic)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Calibration Metrics (Probabilistic)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-brier-score" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.1 Brier Score
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-expected-calibration-error-ece" class="md-nav__link">
    <span class="md-ellipsis">
      
        5.2 Expected Calibration Error (ECE)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-time-series-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      
        6. Time Series Metrics
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Time Series Metrics">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-dynamic-time-warping-dtw" class="md-nav__link">
    <span class="md-ellipsis">
      
        6.1 Dynamic Time Warping (DTW)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-aggregation-strategies-macro-vs-micro" class="md-nav__link">
    <span class="md-ellipsis">
      
        7. Aggregation Strategies (Macro vs Micro)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7. Aggregation Strategies (Macro vs Micro)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#71-micro-averaging" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.1 Micro-Averaging
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#72-macro-averaging" class="md-nav__link">
    <span class="md-ellipsis">
      
        7.2 Macro-Averaging
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-ununennium-implementation" class="md-nav__link">
    <span class="md-ellipsis">
      
        8. Ununennium Implementation
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      
        9. Conclusion
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-references" class="md-nav__link">
    <span class="md-ellipsis">
      
        10. References
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="metric-definitions-and-evaluation-theory-in-geospatial-ai-a-theoretical-treatise">Metric Definitions and Evaluation Theory in Geospatial AI: A Theoretical Treatise</h1>
<h2 id="abstract">Abstract</h2>
<p>Evaluation metrics are the compass by which we navigate the optimization landscape. In Geospatial AI, standard computer vision metrics (like Accuracy) are often misleading due to extreme class imbalance (the "99% Water" problem) and the geometric nature of the predictions. A model with 99% pixel accuracy can fail to detect 50% of buildings if the objects are small. This treatise rigorously defines the set-theoretic, topological, and probabilistic metrics used in Ununennium, analyzing their mathematical properties, failure modes, and optimal use-cases.</p>
<hr />
<h2 id="1-confusion-matrix-primitives">1. Confusion Matrix Primitives</h2>
<p>Let <span class="arithmatex">\(\mathcal{D} = \{ (y_i, \hat{y}_i) \}_{i=1}^N\)</span> be the set of Ground Truth (<span class="arithmatex">\(y\)</span>) and Prediction (<span class="arithmatex">\(\hat{y}\)</span>) pairs.
For a class <span class="arithmatex">\(c\)</span>, we define:
*   <strong>TP (True Positive):</strong> <span class="arithmatex">\(y=c \land \hat{y}=c\)</span>
*   <strong>FP (False Positive):</strong> <span class="arithmatex">\(y \neq c \land \hat{y}=c\)</span> (Type I Error)
*   <strong>FN (False Negative):</strong> <span class="arithmatex">\(y=c \land \hat{y} \neq c\)</span> (Type II Error)
*   <strong>TN (True Negative):</strong> <span class="arithmatex">\(y \neq c \land \hat{y} \neq c\)</span></p>
<h3 id="11-the-accuracy-paradox">1.1 The Accuracy Paradox</h3>
<p>$$ \text{Accuracy} = \frac{TP + TN}{TP + TN + FP + FN} $$
In a dataset with 99% background and 1% target (e.g., Ships in Ocean), a trivial model predicting "All Background" achieves 99% accuracy. Thus, <strong>Accuracy is deprecated</strong> for all Ununennium tasks except balanced scene classification.</p>
<hr />
<h2 id="2-set-theoretic-metrics-overlap">2. Set-Theoretic Metrics (Overlap)</h2>
<p>These metrics view the image as a set of indices <span class="arithmatex">\(\Omega\)</span>. Let <span class="arithmatex">\(A = \{i | y_i = 1\}\)</span> and <span class="arithmatex">\(B = \{i | \hat{y}_i = 1\}\)</span>.</p>
<h3 id="21-jaccard-index-iou-intersection-over-union">2.1 Jaccard Index (IoU - Intersection over Union)</h3>
<p>Measures the ratio of intersection to union.</p>
<div class="arithmatex">\[ \text{IoU}(A, B) = \frac{|A \cap B|}{|A \cup B|} = \frac{TP}{TP + FP + FN} \]</div>
<ul>
<li><strong>Range:</strong> <span class="arithmatex">\([0, 1]\)</span>.</li>
<li><strong>Properties:</strong> Symmetric, Scale Invariant.</li>
<li><strong>Hardness:</strong> IoU penalizes errors more harshly than F1. <span class="arithmatex">\(\text{IoU} \le \text{F1}\)</span> always.</li>
</ul>
<h3 id="22-dice-coefficient-f1-score">2.2 Dice Coefficient (F1 Score)</h3>
<p>The Harmonic Mean of Precision and Recall.</p>
<div class="arithmatex">\[ \text{Dice}(A, B) = \frac{2 |A \cap B|}{|A| + |B|} = \frac{2TP}{2TP + FP + FN} \]</div>
<ul>
<li><strong>Use Case:</strong> Often used as a Loss Function (Soft Dice) because it is differentiable and convex-ish.</li>
<li><strong>Relation to IoU:</strong> <span class="arithmatex">\(Dice = \frac{2 \cdot IoU}{1 + IoU}\)</span>.</li>
</ul>
<hr />
<h2 id="3-geometric-and-boundary-metrics-topology">3. Geometric and Boundary Metrics (Topology)</h2>
<p>For applications like Building Footprint extraction, pixel overlap is insufficient. A model that predicts a blob covering 90% of a building gets 0.9 IoU but fails to capture the square shape.</p>
<h3 id="31-hausdorff-distance">3.1 Hausdorff Distance</h3>
<p>Measures the maximum distance from a point in one set to the nearest point in the other set.</p>
<div class="arithmatex">\[ d_H(A, B) = \max \left( \sup_{a \in A} \inf_{b \in B} d(a, b), \sup_{b \in B} \inf_{a \in A} d(a, b) \right) \]</div>
<ul>
<li><strong>Interpretation:</strong> The "worst case" error. If the model imagines a single outlier pixel 1km away, <span class="arithmatex">\(d_H = 1km\)</span>, even if IoU <span class="arithmatex">\(\approx 1.0\)</span>.</li>
<li><strong>Robustness:</strong> Highly sensitive to outliers.</li>
</ul>
<h3 id="32-boundary-f1-bf1-score">3.2 Boundary F1 (BF1) Score</h3>
<p>Computes Precision and Recall only within a distance buffer <span class="arithmatex">\(d\)</span> of the boundaries.</p>
<div class="arithmatex">\[ \text{Boundary}(S) = \{ x \in S \mid \exists y \notin S, d(x, y) &lt; 1 \text{px} \} \]</div>
<p>We define a match if prediction boundary is within tolerance <span class="arithmatex">\(\theta\)</span> of ground truth boundary.
*   <em>Application:</em> Critical for Road Network extraction, where the width of the road changes but the centerline topology matters.</p>
<hr />
<h2 id="4-detection-metrics-object-level">4. Detection Metrics (Object Level)</h2>
<p>For Object Detection (Bounding Boxes), we operate on discrete objects, not pixels.</p>
<h3 id="41-average-precision-ap">4.1 Average Precision (AP)</h3>
<p>AP is the area under the Precision-Recall Curve (PR Curve).</p>
<div class="arithmatex">\[ AP = \int_0^1 p(r) dr \]</div>
<p>In practice, we compute interpolated AP (COCO style):
$$ AP = \frac{1}{11} \sum_{r \in {0, 0.1, ..., 1.0}} p_{interp}(r) $$
Where <span class="arithmatex">\(p_{interp}(r) = \max_{\tilde{r} \ge r} p(\tilde{r})\)</span>.</p>
<h3 id="42-mean-average-precision-map">4.2 Mean Average Precision (mAP)</h3>
<p>The mean of AP across all classes.
*   <strong>mAP@50:</strong> IoU threshold = 0.5.
*   <strong>mAP@[50:95]:</strong> Average over IoU thresholds 0.50 to 0.95 (step 0.05). Rewards tight localization.</p>
<hr />
<h2 id="5-calibration-metrics-probabilistic">5. Calibration Metrics (Probabilistic)</h2>
<p>Measures the reliability of the confidence scores <span class="arithmatex">\(\hat{p}\)</span>.</p>
<h3 id="51-brier-score">5.1 Brier Score</h3>
<p>The Mean Squared Error of the probability vector.</p>
<div class="arithmatex">\[ BS = \frac{1}{N} \sum_{i=1}^N ( \hat{p}_i - y_i )^2 \]</div>
<p>It decomposes into:
$$ BS = \text{Reliability} - \text{Resolution} + \text{Uncertainty} $$
*   <strong>Reliability:</strong> How close are probabilities to true frequencies.
*   <strong>Resolution:</strong> How distinct are the forecasts from the global average.</p>
<h3 id="52-expected-calibration-error-ece">5.2 Expected Calibration Error (ECE)</h3>
<p>(See Uncertainty Theory for derivation).
ECE helps detect if a model is "hallucinating" high confidence on wrong answers.</p>
<hr />
<h2 id="6-time-series-metrics">6. Time Series Metrics</h2>
<p>For comparing temporal signals <span class="arithmatex">\(T_1\)</span> and <span class="arithmatex">\(T_2\)</span>.</p>
<h3 id="61-dynamic-time-warping-dtw">6.1 Dynamic Time Warping (DTW)</h3>
<p>Euclidean distance assumes indices align (<span class="arithmatex">\(i\)</span> matches <span class="arithmatex">\(i\)</span>). DTW allows non-linear alignment (warping) to handle temporal shifts (e.g., crop season starting 10 days later).</p>
<div class="arithmatex">\[ DTW(T_1, T_2) = \min_{\pi} \sqrt{ \sum_{(i,j) \in \pi} (T_1[i] - T_2[j])^2 } \]</div>
<p>Where <span class="arithmatex">\(\pi\)</span> is the warping path.</p>
<hr />
<h2 id="7-aggregation-strategies-macro-vs-micro">7. Aggregation Strategies (Macro vs Micro)</h2>
<p>When calculating metrics across <span class="arithmatex">\(N\)</span> images and <span class="arithmatex">\(C\)</span> classes:</p>
<h3 id="71-micro-averaging">7.1 Micro-Averaging</h3>
<p>Pools all pixels/objects from all images into one giant Confusion Matrix, then computes metric.
$$ F1_{micro} $$
*   <strong>Behavior:</strong> Dominated by frequent classes. If "Water" is 90% of pixels, Micro-F1 essentially measures Water performance.</p>
<h3 id="72-macro-averaging">7.2 Macro-Averaging</h3>
<p>Computes metric for each class/image independently, then averages.
$$ F1_{macro} = \frac{1}{C} \sum_{c=1}^C F1_c $$
*   <strong>Behavior:</strong> Treats all classes equally. "Rare Bird" has same weight as "Water".
*   <strong>Ununennium Default:</strong> We report <strong>Macro</strong> metrics for validation to ensure performance on rare classes is visible.</p>
<hr />
<h2 id="8-ununennium-implementation">8. Ununennium Implementation</h2>
<p>The <code>ununennium.metrics</code> module provides a unified API backed by <code>torchmetrics</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">MetricCollection</span><span class="p">(</span><span class="n">nn</span><span class="o">.</span><span class="n">Module</span><span class="p">):</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">num_classes</span><span class="p">):</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">iou</span> <span class="o">=</span> <span class="n">IoU</span><span class="p">(</span><span class="n">num_classes</span><span class="p">,</span> <span class="n">reduction</span><span class="o">=</span><span class="s1">&#39;elementwise_mean&#39;</span><span class="p">)</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">f1</span> <span class="o">=</span> <span class="n">F1Score</span><span class="p">(</span><span class="n">num_classes</span><span class="p">,</span> <span class="n">average</span><span class="o">=</span><span class="s1">&#39;macro&#39;</span><span class="p">)</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">brier</span> <span class="o">=</span> <span class="n">BrierScore</span><span class="p">()</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">preds</span><span class="p">,</span> <span class="n">target</span><span class="p">):</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">iou</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">preds</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a>        <span class="bp">self</span><span class="o">.</span><span class="n">f1</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">preds</span><span class="p">,</span> <span class="n">target</span><span class="p">)</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">compute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a>        <span class="k">return</span> <span class="p">{</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>            <span class="s2">&quot;mIoU&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">iou</span><span class="o">.</span><span class="n">compute</span><span class="p">(),</span>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a>            <span class="s2">&quot;MacroF1&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">f1</span><span class="o">.</span><span class="n">compute</span><span class="p">()</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a>        <span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="9-conclusion">9. Conclusion</h2>
<p>A single number can never capture the performance of a complex geospatial model.
*   Use <strong>IoU</strong> for spatial overlap.
*   Use <strong>Boundary F1</strong> for shape fidelity.
*   Use <strong>mAP</strong> for object counting.
*   Use <strong>ECE</strong> for confidence reliability.</p>
<p>Standardizing these metrics allows us to move beyond "it looks good" to empirical science.</p>
<hr />
<h2 id="10-references">10. References</h2>
<ol>
<li><strong>Powers, D. M. (2011).</strong> "Evaluation: from precision, recall and F-measure to ROC, informedness, markedness and correlation".</li>
<li><strong>Csurka, G., et al. (2013).</strong> "What is a good evaluation measure for semantic segmentation?". <em>BMVC</em>.</li>
<li><strong>Everingham, M., et al. (2010).</strong> "The Pascal Visual Object Classes (VOC) Challenge". <em>IJCV</em>.</li>
<li><strong>Niculescu-Mizil, A., &amp; Caruana, R. (2005).</strong> "Predicting good probabilities with supervised learning". <em>ICML</em>.</li>
<li><strong>Taha, A. A., &amp; Hanbury, A. (2015).</strong> "Metrics for evaluating 3D medical image segmentation: analysis, selection, and tool". <em>BMC Medical Imaging</em>.</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.expand", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
        <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>